TMX Module

Daniel-Constantin Mierla

   asipto.com
   <miconda@gmail.com>

Edited by

Daniel-Constantin Mierla

   <miconda@gmail.com>

   Copyright © 2009 Daniel-Constantin Mierla
     __________________________________________________________________

   Table of Contents

   1. Admin Guide

        1.1. Overview
        1.2. Dependencies

              1.2.1. Kamailio Modules
              1.2.2. External Libraries or Applications

        1.3. Exported pseudo-variables
        1.4. Exported MI Functions

              1.4.1. t_uac_dlg
              1.4.2. t_uac_cancel
              1.4.3. t_hash
              1.4.4. t_reply

        1.5. Exported statistics

              1.5.1. received_replies
              1.5.2. relayed_replies
              1.5.3. local_replies
              1.5.4. UAS_transactions
              1.5.5. UAC_transactions
              1.5.6. 2xx_transactions
              1.5.7. 3xx_transactions
              1.5.8. 4xx_transactions
              1.5.9. 5xx_transactions
              1.5.10. 6xx_transactions
              1.5.11. inuse_transactions

Chapter 1. Admin Guide

1.1. Overview

   This module collects extensions from Kamailio TM module.

   Kamailio TM (Transaction Management) module documentation is available
   at: http://www.kamailio.org/docs/modules/1.5.x/tm.html

1.2. Dependencies

1.2.1. Kamailio Modules

   The following modules must be loaded before this module:
     * tm - transaction management.

1.2.2. External Libraries or Applications

   The following libraries or applications must be installed before
   running Kamailio with this module loaded:
     * None.

1.3. Exported pseudo-variables

     * $T_branch_idx
     * $T_reply_code
     * $T_req(pv)
     * $T_rpl(pv)

   Exported pseudo-variables are documented at
   http://www.kamailio.org/dokuwiki/.

1.4. Exported MI Functions

1.4.1.  t_uac_dlg

   Generates and sends a local SIP request.

   Parameters:
     * method - request method
     * RURI - request SIP URI
     * NEXT HOP - next hop SIP URI (OBP); use "." if no value.
     * socket - local socket to be used for sending the request; use "."
       if no value.
     * headers - set of additional headers to be added to the request; at
       least "From" and "To" headers must be specify)
     * body - (optional, may not be present) request body (if present,
       requires the "Content-Type" and "Content-length" headers)

1.4.2.  t_uac_cancel

   Generates and sends a CANCEL for an existing local SIP request.

   Parameters:
     * callid - callid of the INVITE request to be cancelled.
     * cseq - cseq of the INVITE request to be cancelled.

1.4.3.  t_hash

   Gets information about the load of TM internal hash table.

   Parameters:
     * none

1.4.4.  t_reply

   Generates and sends a reply for an existing inbound SIP transaction.

   Parameters:
     * code - reply code
     * reason - reason phrase.
     * trans_id - transaction identifier (has the hash_entry:label format)
     * to_tag - To tag to be added to TO header
     * new_headers - extra headers to be appended to the reply; use a dot
       (".") char only if there are no headers;
     * body - (optional, may not be present) reply body (if present,
       requires the "Content-Type" and "Content-length" headers)

1.5. Exported statistics

   Exported statistics are listed in the next sections. All statistics
   except "inuse_transactions" can be reset.

1.5.1. received_replies

   Total number of total replies received by TM module.

1.5.2. relayed_replies

   Total number of replies received and relayed by TM module.

1.5.3. local_replies

   Total number of replies local generated by TM module.

1.5.4. UAS_transactions

   Total number of transactions created by received requests.

1.5.5. UAC_transactions

   Total number of transactions created by local generated requests.

1.5.6. 2xx_transactions

   Total number of transactions completed with 2xx replies.

1.5.7. 3xx_transactions

   Total number of transactions completed with 3xx replies.

1.5.8. 4xx_transactions

   Total number of transactions completed with 4xx replies.

1.5.9. 5xx_transactions

   Total number of transactions completed with 5xx replies.

1.5.10. 6xx_transactions

   Total number of transactions completed with 6xx replies.

1.5.11. inuse_transactions

   Number of transactions existing in memory at current time.
